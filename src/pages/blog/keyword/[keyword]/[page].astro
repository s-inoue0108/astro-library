---
// Server Side Rendering
export const prerender = false;

import Layout from "../../../../layouts/Layout.astro";
import PageTitle from "../../../../components/blog/background/PageTitle.astro";
import CategoriesNavBar from "../../../../components/blog/background/CategoriesNavBar.astro";
import TagsListModal from "../../../../components/common/modal/TagsListModal.astro";
import ArticleCard from "../../../../components/blog/card/ArticleCard.astro";
import { getArticles } from "../../../../lib/newt/client";

// params
const { keyword, page } = Astro.params;

const articles = await getArticles(1000, "desc", 2, keyword);

console.log(articles);
---

<Layout title={`"${keyword}" の検索結果 | ${import.meta.env.APP_NAME}`} description={`"${keyword}" の検索結果です`}>
	<PageTitle title="BLOG" />
	<CategoriesNavBar />
	<ul class="cards">
		{
			articles && articles.length > 0 ? (
				articles.map((article) => {
					return <ArticleCard article={article} />;
				})
			) : (
				<div>記事がありません</div>
			)
		}
	</ul>
	<TagsListModal />
</Layout>

<style lang="scss">
	.cards {
		width: 100%;
		margin: auto;
		display: flex;
		flex-direction: column;
		gap: 1rem;

		@include resp(lg) {
			flex-direction: row;
			flex-wrap: wrap;
		}
	}
</style>
