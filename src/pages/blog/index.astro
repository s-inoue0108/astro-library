---
import Layout from "../../layouts/Layout.astro";
import ArticleCard from "../../components/blog/card/ArticleCard.astro";
import TagsListModal from "../../components/common/modal/TagsListModal.astro";
import PageTitle from "../../components/blog/background/PageTitle.astro";
import CategoriesNavBar from "../../components/blog/background/CategoriesNavBar.astro";
import NoContent from "../../components/blog/background/NoContent.astro";
// newt
import { getArticles } from "../../lib/newt/client";

const articles = await getArticles(12, "desc", 2);
---

<Layout title={`ブログ | ${import.meta.env.APP_NAME}`} description="ブログ">
	<PageTitle title="Blog" />
	<CategoriesNavBar />
	<ul class="cards">
		{
			articles && articles.length > 0 ? (
				articles.map((article) => {
					return (
						<li class="article-card">
							<ArticleCard article={article} />
						</li>
					);
				})
			) : (
				<NoContent message="記事がありません" />
			)
		}
	</ul>
	<TagsListModal />
</Layout>

<script>
	import { gsap } from "gsap";

	gsap.set(".article-card", {
		x: 30,
		y: 0,
		opacity: 0,
	});

	gsap.to(".article-card", {
		ease: "expo.out",
		duration: 1.5,
		x: 0,
		y: 0,
		opacity: 1,
		stagger: {
			each: 0.2, // 遅延させる時間
			from: "start", // 開始位置の指定 start, end, center, edges, random
		},
	});
</script>

<style lang="scss">
	.cards {
		width: 100%;
		margin: auto;
		display: flex;
		flex-direction: column;
		gap: 1rem;

		@include resp(lg) {
			flex-direction: row;
			flex-wrap: wrap;
		}

		.article-card {
			width: 100%;
			height: 256px;

			@include resp(lg) {
				width: calc(50% - 0.5rem);
			}

			@include resp(xl) {
				width: calc(25% - 0.25rem - 8px);
			}
		}
	}
</style>
