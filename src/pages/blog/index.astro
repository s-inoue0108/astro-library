---
import Layout from "../../layouts/Layout.astro";
import ArticleCard from "../../components/blog/card/ArticleCard.astro";
import TagCard from "../../components/blog/card/TagCard.vue";
import Modal from "../../components/common/modal/ToggleableModal.vue";
import PageTitle from "../../components/blog/background/PageTitle.astro";
import CategoriesNavBar from "../../components/blog/background/CategoriesNavBar.astro";
import { svgPaths } from "../../lib/svg/paths";
// newt
import { getArticles, getTags } from "../../lib/newt/client";

const articles = await getArticles(10, "desc");
const tags = await getTags();

// prerender page
export const prerender = true;
---

<Layout title={`ブログ | ${import.meta.env.APP_NAME}`} description="ブログ">
	<PageTitle title="BLOG" />
	<CategoriesNavBar />
	<ul class="cards">
		{
			articles.map((article) => {
				return <ArticleCard article={article} />;
			})
		}
	</ul>
	<Modal title="タグ" svgIconPath={svgPaths.tags} client:visible>
		<ul class="tags">
			{
				tags.map((tag) => {
					return <TagCard tag={tag} />;
				})
			}
		</ul>
	</Modal>
</Layout>

<style lang="scss">
	.cards {
		width: 100%;
		margin: auto;
		display: flex;
		flex-direction: column;
		gap: 1rem;

		@include resp(lg) {
			flex-direction: row;
			flex-wrap: wrap;
		}
	}

	.tags {
		display: flex;
		flex-wrap: wrap;
		align-items: center;
		gap: 0.3rem;
	}
</style>
