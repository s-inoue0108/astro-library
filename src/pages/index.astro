---
import Layout from "../layouts/Layout.astro";
import SvgButton from "../components/common/buttons/Svg.vue";
import { svgPaths, svgViewBoxes } from "../lib/svg/paths";
// Image
import { Image } from "astro:assets";
// HeaderImage
import HeaderImage from "../images/common/portfolio-favicon.png";
---

<Layout title={`ホーム | ${import.meta.env.APP_NAME}`} description="ホーム">
	<div class="app-title">
		<Image src={HeaderImage} alt={import.meta.env.APP_NAME} class="header-img" />
		<h1 class="title">
			<span>Shota Inoue</span>
			<span>Web Library</span>
		</h1>
		<ul class="buttons">
			<li class="button">
				<SvgButton svgIconPath={svgPaths.user} svgViewBox={svgViewBoxes.user} isLink={true} linkUrl="/profile" />
			</li>
			<li class="button">
				<SvgButton svgIconPath={svgPaths.envelope} svgViewBox={svgViewBoxes.envelope} isLink={true} linkUrl="/contact" />
			</li>
			<li class="button">
				<SvgButton svgIconPath={svgPaths.penNib} svgViewBox={svgViewBoxes.penNib} isLink={true} linkUrl="/blog" title="Blog" widthScale={2.8} />
			</li>
		</ul>
	</div>
</Layout>

<script>
	// GSAP
	import { gsap } from "gsap";

	const headerImg = document.querySelector(".header-img");
	const title = document.querySelector(".title");
	const buttons = gsap.utils.toArray(".button");

	const textWarmTimeline = (target: any) => {
		const tl = gsap.timeline({ repeat: -1 });
		tl.to(target, {
			color: "rgb(251 191 36)",
			duration: 5,
		})
			.to(target, {
				color: "rgb(251 146 60)",
				duration: 5,
			})
			.to(target, {
				color: "rgb(251 113 133)",
				duration: 5,
			});

		if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
			tl.add(
				gsap.to(target, {
					color: "#fff",
					duration: 5,
				})
			);
		} else {
			tl.add(
				gsap.to(target, {
					color: "#000",
					duration: 5,
				})
			);
		}
		return tl;
	};

	gsap
		.timeline()
		.from(headerImg, {
			autoAlpha: 0,
			y: 20,
			duration: 0.8,
			ease: "power3.out",
		})
		.to(headerImg, {
			autoAlpha: 0,
			duration: 0.5,
			delay: 0.3,
			ease: "power4.in",
		})
		.from(title, {
			autoAlpha: 0,
			duration: 0.7,
			ease: "power3.out",
		})
		.from(buttons, {
			autoAlpha: 0,
			yPercent: 30,
			duration: 1.2,
			ease: "power3.out",
			stagger: {
				each: 0.4,
			},
		})
		.add(textWarmTimeline(title), "-=0.6");
</script>

<style scoped lang="scss">
	.app-title {
		width: max-content;
		position: fixed;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);

		display: flex;
		flex-direction: column;
		gap: 3rem;

		.header-img {
			position: fixed;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			width: 128px;
			height: auto;
			object-fit: contain;
			border-radius: 16px;
			margin: auto;
		}

		.title {
			display: flex;
			flex-direction: column;
			align-items: center;
			gap: 1rem;

			font-size: 2.4rem;
			font-weight: 700;
			letter-spacing: 1.5px;
		}

		.buttons {
			display: flex;
			flex-direction: row;
			justify-content: center;
			align-items: center;
			gap: 0.8rem;

			.button {
				color: getColor(--text-secondary-color);
				fill: getColor(--text-secondary-color);
			}
		}
	}
</style>
