---
import { svgPaths, svgViewBoxes } from "../../../lib/svg/paths";
import { categories } from "../../../lib/newt/instance";
// Image
import { Image } from "astro:assets";
import ZennLogo from "../../../images/common/zenn-logo.svg";

const date = new Date();
const year = date.getFullYear();
---

<nav class="menu-content">
	<ul class="menu-links">
		<li class="menu-link">
			<a href="/blog/all/1">
				<svg
					xmlns="http://www.w3.org/2000/svg"
					viewBox={svgViewBoxes.caretRight}
					class="other-svgs"
				>
					<path d={svgPaths.caretRight}></path>
				</svg>
				<span>ブログ</span>
			</a>
			<ul class="categories">
				{
					categories &&
						categories.map((category) => {
							return (
								<li class="category">
									<a href={`/blog/category/${category.slug}/1`}>
										<svg
											xmlns="http://www.w3.org/2000/svg"
											viewBox={category.svgViewBox}
											fill={category.themeColor}
										>
											<path d={category.svgIconPath} />
										</svg>
										<span>{category.name}</span>
									</a>
								</li>
							);
						})
				}
				<li class="category">
					<a href={`/blog/search`}>
						<svg
							xmlns="http://www.w3.org/2000/svg"
							viewBox={svgViewBoxes.magnifyingGlass}
							class="other-svgs"
						>
							<path d={svgPaths.magnifyingGlass}></path>
						</svg>
						<span>記事をさがす</span>
					</a>
				</li>
				<li class="category">
					<a href={`/blog/links`}>
						<svg xmlns="http://www.w3.org/2000/svg" viewBox={svgViewBoxes.link} class="other-svgs">
							<path d={svgPaths.link}></path>
						</svg>
						<span>開発リンク集</span>
					</a>
				</li>
			</ul>
		</li>
		<hr />
		<li class="menu-link">
			<a href="/profile">
				<svg
					xmlns="http://www.w3.org/2000/svg"
					viewBox={svgViewBoxes.caretRight}
					class="other-svgs"
				>
					<path d={svgPaths.caretRight}></path>
				</svg>
				<span>プロフィール</span>
			</a>
		</li>
		<hr />
		<li class="menu-link">
			<a href="/privacy-policy">
				<svg
					xmlns="http://www.w3.org/2000/svg"
					viewBox={svgViewBoxes.caretRight}
					class="other-svgs"
				>
					<path d={svgPaths.caretRight}></path>
				</svg>
				<span>プライバシーポリシー</span>
			</a>
		</li>
		<hr />
		<li class="menu-link">
			<a href="/contact">
				<svg
					xmlns="http://www.w3.org/2000/svg"
					viewBox={svgViewBoxes.caretRight}
					class="other-svgs"
				>
					<path d={svgPaths.caretRight}></path>
				</svg>
				<span>お問い合わせ</span>
			</a>
		</li>
		<hr />
	</ul>
	<ul class="external-links">
		<li class="external-link">
			<a href={import.meta.env.X_URL} target="_blank" rel="noopener noreferrer">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox={svgViewBoxes.xTwitter}>
					<path d={svgPaths.xTwitter}></path>
				</svg>
			</a>
		</li>
		<li class="external-link">
			<a href={import.meta.env.GITHUB_URL} target="_blank" rel="noopener noreferrer">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox={svgViewBoxes.github}>
					<path d={svgPaths.github}></path>
				</svg>
			</a>
		</li>
		<li class="external-link">
			<a href={import.meta.env.ZENN_URL} target="_blank" rel="noopener noreferrer">
				<Image src={ZennLogo} alt="Zenn" />
			</a>
		</li>
	</ul>
	<h6 class="copyright">
		&copy; {year} Shota Inoue
	</h6>
</nav>

<style lang="scss">
	.menu-content {
		width: 100%;
		height: 100dvh;
		position: fixed;
		top: 0;
		left: 0;
		z-index: 100;
		background: getColor(--bg-primary-color, 0.95);
		color: getColor(--text-primary-color);
		padding: calc(36px + 1rem) 1.5rem;

		@include resp(sm) {
			padding: calc(48px + 1rem) 1.5rem;
		}

		@include resp(lg) {
			padding: calc(64px + 1rem) 1.5rem;
		}
	}

	.menu-links {
		display: flex;
		flex-direction: column;
		align-items: start;
		gap: 1rem;

		@include resp(lg) {
			flex-direction: row;
			justify-content: space-around;
			margin-top: 3rem;
		}

		.menu-link {
			font-size: 1.5rem;
			font-weight: 600;
			letter-spacing: 1px;

			@include resp(lg) {
				font-size: 2rem;
			}

			a {
				display: flex;
				align-items: center;
				gap: 1rem;
				height: 1.5rem;
				white-space: nowrap;

				svg {
					height: 1.5rem;

					@include resp(lg) {
						height: 2rem;
					}
				}

				.other-svgs {
					fill: getColor(--text-primary-color);
				}
			}
		}

		.categories {
			display: flex;
			flex-direction: column;
			gap: 0.7rem;
			padding: 1rem 0 0 1rem;

			@include resp(lg) {
				gap: 2rem;
				padding: 3rem 0 0 0;
			}

			.category {
				display: inline-flex;
				align-items: center;
				font-size: 1rem;
				font-weight: 300;

				@include resp(lg) {
					font-size: 1.5rem;
					letter-spacing: 2px;
				}

				svg {
					width: 1rem;
					max-height: 1rem;

					@include resp(lg) {
						width: 1.5rem;
						max-height: 1.5rem;
					}
				}
			}
		}
	}

	.external-links {
		position: absolute;
		bottom: 1rem;
		right: 1rem;

		display: flex;
		align-items: center;
		gap: 1.2rem;

		@include resp(lg) {
			gap: 2rem;
		}

		.external-link {
			width: 1.2rem;
			height: 1.2rem;

			@include resp(lg) {
				width: 2rem;
				height: 2rem;
			}

			img {
				width: 100%;
				height: 100%;
				object-fit: contain;
			}

			svg {
				width: 100%;
				height: 100%;
				fill: getColor(--bg-inversion-color);
			}
		}
	}

	.copyright {
		position: absolute;
		bottom: 1rem;
		left: 1rem;

		font-size: 0.8rem;
		font-weight: 300;
		color: getColor(--text-primary-color);

		@include resp(sm) {
			font-size: 0.9rem;
		}

		@include resp(lg) {
			font-size: 1rem;
		}
	}

	hr {
		width: 100vw;
		margin-left: -1.5rem;
		border: solid 0.5px getColor(--border-color);

		@include resp(lg) {
			display: none;
		}
	}
</style>
