---
import type { Article } from "../../../lib/newt/types";
// Image
import { Image } from "astro:assets";
// Header Image
import HeaderImage from "../../../images/common/portfolio-favicon.png";

interface Props {
	articleProps: Pick<Article, "title" | "slug" | "description" | "thambnail" | "category" | "tags" | "_sys">;
}

const { articleProps } = Astro.props;
const { title, slug, description, thambnail, category, tags, _sys } = articleProps;
---

<a href={`/blog/article/${slug}`} class="card">
	<div class="thambnail">
		{thambnail ? <Image src={thambnail.src} width={thambnail.width} height={thambnail.height} alt={thambnail?.altText ?? ""} /> : <Image src={HeaderImage} alt="" />}
	</div>
	<ul class="info">
		<li class="title">
			<h1>{title}</h1>
		</li>
		<li class="description">
			<p>{description}</p>
		</li>
		<li class="meta-info">
			<div class="tags">
				{
					tags
						? tags.slice(0, 2).map((tag) => {
								return <span class="tag">{tag.name}</span>;
							})
						: ""
				}
			</div>
			<div class="published-at">
				{new Intl.DateTimeFormat("ja").format(new Date(_sys.raw.publishedAt))}
			</div>
		</li>
	</ul>
</a>

<style lang="scss">
	.card {
		position: relative;
		display: block;
		width: 100%;
		height: 256px;
		border: solid 2px var(--border-color);
		border-radius: 8px;

		.thambnail {
			width: 100%;
			height: 100%;
			position: absolute;

			img {
				width: 100%;
				height: 100%;
				object-fit: cover;
				border-radius: 6px;
			}
		}

		.info {
			width: 100%;
			height: 50%;
			position: absolute;
			bottom: 0;
			border-radius: 0 0 6px 6px;
			background: var(--bg-secondary-color);
			opacity: 0.5;
		}
	}
</style>
